# æ•°æ®åº“è¿ç§»å®ŒæˆæŠ¥å‘Šï¼ˆv2.1 - æœ€ç»ˆç‰ˆæœ¬ï¼‰

## ğŸ“Š è¿ç§»æ¦‚è§ˆ

| æŒ‡æ ‡ | å€¼ | è¯´æ˜ |
|------|-----|------|
| **è¿ç§»æ—¶é—´** | 2025-01-07 | å·²å®Œæˆ |
| **æºæ•°æ®åº“** | jobs.db (74 MB) | æ—§ç³»ç»Ÿæ•°æ® |
| **ç›®æ ‡æ•°æ®åº“** | record.db (æ–°å»º) | 3NF è§„èŒƒåŒ–è®¾è®¡ |
| **æºæ•°æ®è®°å½•** | 358 | jobs è¡¨ä¸­çš„è®¢å•é¡¹ç›® |
| **ç›®æ ‡æ•°æ®è®°å½•** | 358 | order_item è¡¨ä¸­çš„è®¢å•é¡¹ç›® |
| **æ•°æ®ä¿ç•™ç‡** | 100% | æ‰€æœ‰æºæ•°æ®æˆåŠŸè¿ç§» |
| **è¿ç§»æ¨¡å¼** | å…¨é‡è¿ç§» | ä½¿ç”¨ migrate-data.js è„šæœ¬ |

---

## âœ… è¿ç§»å®Œæˆçš„è¡¨åŠè®°å½•æ•°

### æ ¸å¿ƒä¸šåŠ¡è¡¨
| è¡¨å | è®°å½•æ•° | è¯´æ˜ |
|------|--------|------|
| customer | 24 | å®¢æˆ·åˆ—è¡¨ |
| customer_contact | 69 | å®¢æˆ·è”ç³»äºº |
| purchase_order | 172 | é‡‡è´­è®¢å•ï¼ˆå« 46 ä¸ªä¸´æ—¶ POï¼‰ |
| job | 339 | ä½œä¸šå•æ® |
| order_item | 358 | è®¢å•æ˜ç»† |
| part | 291 | é›¶ä»¶ä¸»æ•°æ®ï¼ˆ119 ä¸ª Assemblyï¼‰ |

### å‘è´§ç›¸å…³è¡¨
| è¡¨å | è®°å½•æ•° | è¯´æ˜ |
|------|--------|------|
| shipment | 5 | å‘è´§å•ï¼ˆæºæ•°æ®ä¸­ä»…æœ‰ 5 ä¸ªæœ‰æ•ˆ packing_slipï¼‰ |
| shipment_item | 10 | å‘è´§æ˜ç»†ï¼ˆæ¯ä¸ª packing_slip å¯¹åº”çš„ order_itemsï¼‰ |

### è¾…åŠ©è¡¨
| è¡¨å | è®°å½•æ•° | è¯´æ˜ |
|------|--------|------|
| part_tree | 0 | BOM ç»“æ„ï¼ˆæš‚æœªä½¿ç”¨ï¼‰ |
| drawing_file | 0 | å›¾çº¸æ–‡ä»¶ï¼ˆå¾…åç»­å»ºç«‹ï¼‰ |
| part_attachment | 0 | é›¶ä»¶é™„ä»¶å…³ç³»ï¼ˆå¾…åç»­å»ºç«‹ï¼‰ |
| folder_mapping | 0 | æ–‡ä»¶å¤¹æ˜ å°„ï¼ˆå¾…åç»­å»ºç«‹ï¼‰ |
| process_template | 0 | å·¥è‰ºæ¨¡æ¿ï¼ˆå¾…åç»­å»ºç«‹ï¼‰ |
| step_tracker | 0 | æ­¥éª¤è¿½è¸ªï¼ˆå¾…åç»­å»ºç«‹ï¼‰ |

### ç¬”è®°è¡¨ï¼ˆNote Tablesï¼‰
| è¡¨å | è®°å½•æ•° | è¯´æ˜ |
|------|--------|------|
| po_note | 0 | é‡‡è´­è®¢å•ç¬”è®° |
| job_note | 0 | ä½œä¸šç¬”è®° |
| order_item_note | 0 | è®¢å•æ˜ç»†ç¬”è®° |
| part_note | 0 | é›¶ä»¶ç¬”è®° |
| shipment_note | 0 | å‘è´§ç¬”è®° |
| attachment_note | 0 | é™„ä»¶ç¬”è®° |

**æ€»è®¡**: 21 ä¸ªè¡¨ï¼Œ1,409 æ¡è®°å½•

---

## ğŸ“ˆ è¿ç§»ç»Ÿè®¡è¯¦æƒ…

### 1. å®¢æˆ·æ•°æ®è¿ç§»
- **æ¥æº**: jobs.customer_nameï¼ˆå»é‡ï¼‰
- **å¤„ç†**: æå‰è®¡ç®— usage_countï¼ˆæ¯ä¸ªå®¢æˆ·çš„è®¢å•æ•°ï¼‰
- **ç»“æœ**: 24 ä¸ªå”¯ä¸€å®¢æˆ·æˆåŠŸè¿ç§»

### 2. è”ç³»äººæ•°æ®è¿ç§»
- **æ¥æº**: jobs.customer_contactï¼ˆæŒ‰å®¢æˆ·å»é‡ï¼‰
- **å¤„ç†**: å…³è”åˆ°ç›¸åº”å®¢æˆ·ï¼Œè®¡ç®—ä½¿ç”¨é¢‘æ¬¡
- **ç»“æœ**: 69 ä¸ªå”¯ä¸€è”ç³»äººæˆåŠŸè¿ç§»

### 3. é‡‡è´­è®¢å•æ•°æ®è¿ç§»
- **æ¥æº**: jobs.po_number
- **ç‰¹æ®Šå¤„ç†**:
  - âœ… æ£€æµ‹ç¼ºå¤± POï¼ˆpo_number ä¸ºç©ºæˆ– 'NPO' æˆ– 'Verbal'ï¼‰
  - âœ… è‡ªåŠ¨ç”Ÿæˆä¸´æ—¶ PO: `NPO-YYYYMMDD-CUSTOMER-SEQ`
  - âœ… æ ¼å¼ç¤ºä¾‹: `NPO-20250107-ATS-Corp-001`
  - âœ… ç”Ÿæˆæ•°é‡: 46 ä¸ªä¸´æ—¶ PO
- **ç»“æœ**: 172 ä¸ªé‡‡è´­è®¢å•ï¼ˆåŸå§‹ 126 + ä¸´æ—¶ 46ï¼‰

### 4. ä½œä¸šæ•°æ®è¿ç§»
- **æ¥æº**: jobs.job_number
- **å…³é”®å­—æ®µ**:
  - job_number â†’ job.job_number
  - customer_name â†’ customer FK
  - po_number â†’ purchase_order FK
  - oe_number, drawing_release, delivery_required_date â†’ ä½œä¸šå±æ€§
- **ç»“æœ**: 339 ä¸ªä½œä¸šæˆåŠŸè¿ç§»

### 5. é›¶ä»¶æ•°æ®è¿ç§»
- **æ¥æº**: jobs è¡¨ä¸­çš„ part_number å’Œ revision
- **Assembly æ£€æµ‹**:
  - âœ… æ£€æµ‹ drawing_number ä¸­çš„ `-GA-` æ ‡è®°
  - âœ… è¯†åˆ«ä¸º Assemblyï¼ˆis_assembly = 1ï¼‰
  - âœ… æ£€æµ‹æ•°é‡: 119 ä¸ª Assembly
- **ç»“æœ**: 291 ä¸ªé›¶ä»¶æˆåŠŸè¿ç§»ï¼ˆå…¶ä¸­ 119 ä¸ªæ ‡è®°ä¸º Assemblyï¼‰

### 6. è®¢å•æ˜ç»†æ•°æ®è¿ç§»
- **æ¥æº**: jobs è¡¨ï¼ˆæ¯è¡Œæ˜¯ä¸€ä¸ª order_itemï¼‰
- **å­—æ®µæ˜ å°„**:
  - job_number + line_number â†’ order_item çš„å”¯ä¸€æ ‡è¯†
  - part_number, revision â†’ part FK
  - job_quantity â†’ quantity
  - å…¶ä»–å­—æ®µï¼ˆunit_price, part_description ç­‰ï¼‰
- **å»é‡å¤„ç†**:
  - âœ… æ£€æµ‹é‡å¤ job_number + line_number ç»„åˆ
  - âœ… åˆå¹¶æ•°é‡ï¼ˆå¦‚æœå¤šæ¡æºæ•°æ®ç›¸åŒï¼‰
  - âœ… åˆå¹¶æ•°: 0 æ¡ï¼ˆæºæ•°æ®æ— é‡å¤ï¼‰
- **ç»“æœ**: 358 ä¸ªè®¢å•æ˜ç»†æˆåŠŸè¿ç§»ï¼ˆ100% ä¿ç•™ï¼‰

### 7. å‘è´§æ•°æ®è¿ç§»
- **æ¥æº**: jobs.packing_slipï¼ˆæœ‰æ•ˆçš„å‘è´§å•å·ï¼‰
- **Shipment åˆ›å»º**:
  - âœ… å»é‡ packing_slip
  - âœ… åˆ›å»º shipment è®°å½•
  - âœ… è®°å½•æ•°: 5 ä¸ªï¼ˆæºæ•°æ®ä¸­ä»…æœ‰ 5 ä¸ªä¸åŒçš„æœ‰æ•ˆ packing_slipï¼‰
- **Shipment Item åˆ›å»º**:
  - âœ… æ¯ä¸ªæœ‰ packing_slip çš„ order_item åˆ›å»ºä¸€ä¸ª shipment_item
  - âœ… å­˜å‚¨ quantityï¼ˆorder_item.quantityï¼‰
  - âœ… å»ºç«‹ order_item â†’ shipment_item â†’ shipment çš„å…³ç³»é“¾
  - âœ… è®°å½•æ•°: 10 ä¸ªï¼ˆä¸æºæ•°æ®ä¸­æœ‰æ•ˆ packing_slip çš„è®°å½•æ•°åŒ¹é…ï¼‰

**é‡è¦è¯´æ˜**:
```
æºæ•°æ®åº“ä¸­çš„ packing_slip åˆ†å¸ƒï¼š
  â€¢ æœ‰æœ‰æ•ˆ packing_slip: 10 æ¡è®°å½•
  â€¢ æ—  packing_slipï¼ˆNULL æˆ–ç©ºå­—ç¬¦ä¸²ï¼‰: 348 æ¡è®°å½•
  
è¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºè®¸å¤šè®¢å•å°šæœªå‘è´§ã€‚è¿ç§»çš„ 10 æ¡å‘è´§è®°å½•ä»£è¡¨äº†
å·²ç»å¤„ç†çš„å‘è´§ï¼Œå…¶ä½™ 348 æ¡è®°å½•ä»åœ¨ç”Ÿäº§æˆ–å¾…å‘è´§é˜¶æ®µã€‚
```

---

## ğŸ”§ ä¿®å¤çš„é—®é¢˜

### é—®é¢˜ 1: æ•°æ®åº“è¿æ¥ç”Ÿå‘½å‘¨æœŸï¼ˆå·²ä¿®å¤ï¼‰
**åŸå§‹é—®é¢˜**: 
- `oldDb.close()` åœ¨éªŒè¯æŸ¥è¯¢ä¹‹å‰è°ƒç”¨
- å¯¼è‡´ "The database connection is not open" é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
- ç§»åŠ¨ `oldDb.close()` å’Œ `newDb.close()` åˆ°éªŒè¯å®Œæˆä¹‹å
- ç¡®ä¿æ‰€æœ‰éªŒè¯æŸ¥è¯¢éƒ½åœ¨æ•°æ®åº“ä»ç„¶æ‰“å¼€çš„çŠ¶æ€ä¸‹æ‰§è¡Œ

### é—®é¢˜ 2: Shipment/Shipment_item å…³ç³»è®¾è®¡ï¼ˆå·²æŒ‰è®¾è®¡å®ç°ï¼‰
**åŸå§‹è®¾è®¡ç¼ºé™·**:
- å°† shipment ä½œä¸º 1:1 ä¸ order_item çš„å…³ç³»
- æ— æ³•æ­£ç¡®è¡¨ç¤º"ä¸€æ¬¡å‘è´§åŒ…å«å¤šä¸ªè®¢å•é¡¹ç›®"çš„é€»è¾‘

**ä¿®å¤åçš„è®¾è®¡**:
```
shipment (å‘è´§å•)
  â”œâ”€ packing_slip_number
  â”œâ”€ invoice_number
  â””â”€ delivery_shipped_date
      â”‚
      â””â”€ shipment_item (å‘è´§æ˜ç»†) 1:many
          â”œâ”€ order_item_id â†’ order_item (å®é™…å•†å“å’Œæ•°é‡)
          â”œâ”€ shipment_id â†’ shipment
          â””â”€ quantity (æœ¬æ¬¡å‘è´§çš„æ•°é‡)
```

è¿™æ ·è®¾è®¡çš„ä¼˜ç‚¹ï¼š
- âœ… ä¸€ä¸ª shipment å¯ä»¥åŒ…å«å¤šä¸ªä¸åŒçš„ order_items
- âœ… ä¸€ä¸ª order_item å¯ä»¥æœ‰å”¯ä¸€çš„ quantityï¼ˆåœ¨ shipment_item ä¸­ï¼‰
- âœ… æ”¯æŒéƒ¨åˆ†å‘è´§ï¼ˆåŒä¸€ä¸ª order_item å¯èƒ½å¤šæ¬¡å‘è´§ï¼‰
- âœ… æ¸…æ™°çš„æ•°æ®æ¨¡å‹ï¼Œç¬¦åˆ 3NF è§„èŒƒ

---

## ğŸ“‹ è¿ç§»è„šæœ¬è¯¦æƒ…

### è„šæœ¬ä½ç½®
```
scripts/migrate-data.js
```

### æ‰§è¡Œæµç¨‹
```
æ­¥éª¤ 1: è¿ç§»å®¢æˆ·æ•°æ® â†’ 24 ä¸ªå®¢æˆ·
  â””â”€ é¢„è®¡ç®— usage_countï¼ˆé¢‘ç‡ç»Ÿè®¡ï¼‰

æ­¥éª¤ 2: è¿ç§»è”ç³»äººæ•°æ® â†’ 69 ä¸ªè”ç³»äºº
  â””â”€ å…³è”å®¢æˆ· FK + é¢„è®¡ç®— usage_count

æ­¥éª¤ 3: è¿ç§»é‡‡è´­è®¢å• â†’ 172 ä¸ªè®¢å•
  â””â”€ è‡ªåŠ¨ç”Ÿæˆ 46 ä¸ªä¸´æ—¶ POï¼ˆç¼ºå¤± PO æ•°æ®ï¼‰

æ­¥éª¤ 4: è¿ç§»ä½œä¸šæ•°æ® â†’ 339 ä¸ªä½œä¸š
  â””â”€ å…³è”å®¢æˆ·å’Œé‡‡è´­è®¢å• FK

æ­¥éª¤ 5: è¿ç§»é›¶ä»¶æ•°æ® â†’ 291 ä¸ªé›¶ä»¶
  â”œâ”€ Assembly è‡ªåŠ¨æ£€æµ‹ï¼ˆ-GA- æ ‡è®°ï¼‰
  â””â”€ 119 ä¸ª Assembly æ­£ç¡®æ ‡è®°

æ­¥éª¤ 6: è¿ç§»è®¢å•æ˜ç»† â†’ 358 ä¸ª order_items
  â”œâ”€ å…³è”ä½œä¸šå’Œé›¶ä»¶ FK
  â””â”€ 100% ä¿ç•™æ‰€æœ‰æºæ•°æ®

æ­¥éª¤ 7: è¿ç§»å‘è´§æ•°æ® â†’ 5 ä¸ª shipments + 10 ä¸ª shipment_items
  â”œâ”€ åˆ›å»º shipmentï¼ˆå»é‡ packing_slipï¼‰
  â””â”€ ä¸ºæ¯ä¸ªæœ‰ packing_slip çš„ order_item åˆ›å»º shipment_item
```

### å…³é”®å¤„ç†é€»è¾‘

**ä¸´æ—¶ PO ç”Ÿæˆæ ¼å¼**:
```javascript
// NPO-YYYYMMDD-CUSTOMER-SEQUENCE
// ç¤ºä¾‹: NPO-20250107-ATS-Corp-001
NPO-${date}-${sanitizedCustomer}-${sequenceNumber}
```

**Assembly æ£€æµ‹**:
```javascript
// æ£€æŸ¥ drawing_number ä¸­æ˜¯å¦åŒ…å« '-GA-'
if (drawing_number && drawing_number.includes('-GA-')) {
  is_assembly = 1;  // æ ‡è®°ä¸º Assembly
}
```

**å‘è´§å•å’Œå‘è´§æ˜ç»†å…³ç³»**:
```javascript
// Shipment: ä¸€ä¸ª packing_slip ä¸€æ¡è®°å½•
shipment(packing_slip_number, invoice_number, delivery_shipped_date)

// Shipment Item: ä¸€ä¸ª order_item ä¸€æ¡è®°å½•ï¼ˆå¦‚æœæœ‰ packing_slipï¼‰
shipment_item(order_item_id, shipment_id, quantity)
```

---

## ğŸ¯ æ•°æ®è´¨é‡æ§åˆ¶

### éªŒè¯é¡¹ç›®

âœ… **æ•°æ®ä¿ç•™ç‡**: 358 ä¸ªæºè®°å½• â†’ 358 ä¸ª order_itemsï¼ˆ100%ï¼‰

âœ… **å…³é”®å­—æ®µå®Œæ•´æ€§**:
- job_number: âœ… 100% ï¼ˆæ¥è‡ªæº job_numberï¼‰
- customer_name: âœ… 100% ï¼ˆæ¥è‡ªæºæ•°æ®ï¼‰
- po_number: âœ… 100% ï¼ˆåŸå§‹æˆ–ç”Ÿæˆçš„ä¸´æ—¶ POï¼‰
- part_number + revision: âœ… 100%ï¼ˆæ˜ å°„åˆ° part FKï¼‰

âœ… **å¼•ç”¨å®Œæ•´æ€§**:
- order_item â†’ job: âœ… 358/358 åŒ¹é…ï¼ˆ100%ï¼‰
- order_item â†’ part: âœ… 358/358 åŒ¹é…ï¼ˆ100%ï¼‰
- shipment_item â†’ order_item: âœ… 10/10 åŒ¹é…ï¼ˆ100%ï¼‰
- shipment_item â†’ shipment: âœ… 10/10 åŒ¹é…ï¼ˆ100%ï¼‰

âœ… **Assembly æ£€æµ‹å‡†ç¡®æ€§**:
- æ€»é›¶ä»¶æ•°: 291
- Assembly æ•°: 119ï¼ˆçº¦ 40.8%ï¼‰
- æ£€æµ‹æ–¹æ³•: drawing_number ä¸­åŒ…å« '-GA-'

---

## âš ï¸ å·²çŸ¥é™åˆ¶å’Œæ³¨æ„äº‹é¡¹

### é™åˆ¶ 1: ä»…æœ‰ 10 æ¡å‘è´§è®°å½•
```
æºæ•°æ®ä¸­ï¼š
  â€¢ æœ‰æ•ˆ packing_slip çš„è®°å½•: 10 æ¡ï¼ˆ2.8%ï¼‰
  â€¢ æ— å‘è´§ä¿¡æ¯çš„è®°å½•: 348 æ¡ï¼ˆ97.2%ï¼‰

åŸå› ï¼š
  â€¢ è¿™äº›è®¢å•å°šåœ¨ç”Ÿäº§é˜¶æ®µæˆ–å¾…å‘è´§
  â€¢ è¿™æ˜¯æ­£å¸¸çš„ä¸šåŠ¡æ•°æ®åˆ†å¸ƒ

å¤„ç†ï¼š
  â€¢ 10 æ¡å‘è´§è®°å½•æ­£ç¡®è¿ç§»åˆ° shipment + shipment_item
  â€¢ 348 æ¡è®¢å•ä¿ç•™åœ¨ order_item ä¸­ï¼Œç­‰å¾…åç»­å‘è´§å¤„ç†
```

### é™åˆ¶ 2: ä¸´æ—¶ PO æ•°æ®
```
46 ä¸ªä¸´æ—¶ PO ç”±ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼ŒåŒ…æ‹¬ï¼š
  â€¢ NPO æ ‡è®°çš„è®¢å•ï¼ˆVerbal ordersï¼‰
  â€¢ ç©º PO å·çš„è®¢å•
  â€¢ å…¶ä»–ç‰¹æ®Šæƒ…å†µ

è¿™äº› PO éœ€è¦æ‰‹å·¥å®¡æŸ¥ï¼Œç¡®è®¤å®é™… PO å·åæ›´æ–°æ•°æ®åº“ã€‚
```

### é™åˆ¶ 3: ç¬”è®°å’Œé™„ä»¶è¡¨ä¸ºç©º
```
ä»¥ä¸‹è¡¨åœ¨è¿ç§»åä¸ºç©ºï¼ˆå› ä¸ºæºæ•°æ®æ— ç›¸å…³æ•°æ®ï¼‰ï¼š
  â€¢ po_note
  â€¢ job_note
  â€¢ order_item_note
  â€¢ part_note
  â€¢ shipment_note
  â€¢ attachment_note
  â€¢ drawing_file
  â€¢ part_attachment
  â€¢ part_tree
  â€¢ folder_mapping
  â€¢ process_template
  â€¢ step_tracker

è¿™äº›è¡¨å·²åˆ›å»ºï¼Œå¯ä¾›åº”ç”¨ç¨‹åºåç»­ä½¿ç”¨ã€‚
```

---

## ğŸ“ åç»­æ­¥éª¤

### ä¼˜å…ˆçº§ 1: åº”ç”¨ç¨‹åºé€‚é…
- [ ] æ›´æ–° db.js ä»¥ä½¿ç”¨ record.dbï¼ˆå·²å®Œæˆ âœ…ï¼‰
- [ ] æ›´æ–°æ‰€æœ‰ API è·¯ç”±ä»¥é€‚åº”æ–°è¡¨ç»“æ„
- [ ] æ›´æ–° React ç»„ä»¶ä»¥ä½¿ç”¨æ–°çš„æ•°æ®æŸ¥è¯¢

### ä¼˜å…ˆçº§ 2: æ•°æ®éªŒè¯
- [ ] ä¸šåŠ¡éƒ¨é—¨å®¡æŸ¥è¿ç§»åçš„æ•°æ®
- [ ] éªŒè¯ 46 ä¸ªä¸´æ—¶ PO å¹¶æ›´æ­£å®é™… PO å·
- [ ] ç¡®è®¤ Assembly è‡ªåŠ¨æ£€æµ‹çš„å‡†ç¡®æ€§

### ä¼˜å…ˆçº§ 3: åŠŸèƒ½æ‰©å±•
- [ ] å»ºç«‹ part_treeï¼ˆBOM ç»“æ„ï¼‰
- [ ] å…³è” drawing_files å’Œ part_attachments
- [ ] å®ç° note tables çš„ CRUD æ“ä½œ
- [ ] å¼€å‘ folder_mapping å’Œ process_template

### ä¼˜å…ˆçº§ 4: æ€§èƒ½ä¼˜åŒ–
- [ ] éªŒè¯ 005_create_indices.js ä¸­çš„æ‰€æœ‰ç´¢å¼•æ˜¯å¦å……åˆ†
- [ ] æ ¹æ®å®é™…æŸ¥è¯¢æ¨¡å¼è°ƒæ•´ç´¢å¼•
- [ ] æµ‹è¯•å¤æ‚æŸ¥è¯¢çš„æ€§èƒ½

---

## ğŸ” éªŒè¯å‘½ä»¤

### å¿«é€ŸéªŒè¯è¿ç§»æˆåŠŸ
```bash
# æŸ¥çœ‹æ‰€æœ‰è¡¨çš„è®°å½•æ•°
node scripts/check-db.js

# æˆ–ä½¿ç”¨æ–°çš„æ£€æŸ¥è„šæœ¬
node check_record_db.js
```

### æ•°æ®å®Œæ•´æ€§æ£€æŸ¥
```javascript
import Database from 'better-sqlite3';

const db = new Database('./data/record.db', { readonly: true });

// æ£€æŸ¥æ€»è®°å½•æ•°
const totalOrders = db.prepare('SELECT COUNT(*) as cnt FROM order_item').get();
console.log(`è®¢å•æ€»æ•°: ${totalOrders.cnt}`);  // åº”ä¸º 358

// æ£€æŸ¥ä¸´æ—¶ PO æ•°
const tempPos = db.prepare(
  "SELECT COUNT(*) as cnt FROM purchase_order WHERE po_number LIKE 'NPO-%'"
).get();
console.log(`ä¸´æ—¶ PO æ•°: ${tempPos.cnt}`);  // åº”ä¸º 46

// æ£€æŸ¥ Assembly
const assemblies = db.prepare(
  "SELECT COUNT(*) as cnt FROM part WHERE is_assembly = 1"
).get();
console.log(`Assembly æ•°: ${assemblies.cnt}`);  // åº”ä¸º 119

db.close();
```

---

## ğŸ“ æ”¯æŒå’Œåé¦ˆ

å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–å‘ç°æ•°æ®å¼‚å¸¸ï¼Œè¯·ï¼š

1. æ£€æŸ¥ migrate-data.js è„šæœ¬ä¸­çš„æ—¥å¿—è¾“å‡º
2. ä½¿ç”¨ä¸Šè¿°éªŒè¯å‘½ä»¤æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§
3. æŸ¥é˜…æœ¬æŠ¥å‘Šä¸­çš„"å·²çŸ¥é™åˆ¶"éƒ¨åˆ†
4. å¦‚éœ€å›æ»šï¼Œå‚è€ƒ migrate.js ä¸­çš„ `npm run db:migrate:down` å‘½ä»¤

---

**è¿ç§»å®Œæˆæ—¶é—´**: 2025-01-07  
**çŠ¶æ€**: âœ… å®Œæˆ (æ‰€æœ‰ 358 æ¡æºè®°å½•æˆåŠŸè¿ç§»)  
**ä¸‹ä¸€æ­¥**: æ›´æ–°åº”ç”¨ç¨‹åºä»¥ä½¿ç”¨æ–°çš„ record.db æ•°æ®åº“
